<Window x:Class="ThinkMine.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="ThinkMine" Height="600" Width="800"
        WindowStyle="None" ResizeMode="CanResize"
        Background="White"
        WindowStartupLocation="CenterScreen"
        PreviewKeyDown="Window_PreviewKeyDown"
        PreviewMouseRightButtonUp="Window_PreviewMouseRightButtonUp"
        MouseDown="Window_MouseDown"
        Loaded="Window_Loaded"
        Closing="Window_Closing">

    <Window.Resources>
        <Style x:Key="TinyControlStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Margin" Value="8,0,0,0"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Opacity" Value="0.7"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <!-- Main Text Area -->
        <RichTextBox x:Name="MainEditor"
                     BorderThickness="0"
                     Padding="48"
                     AcceptsReturn="True"
                     AcceptsTab="True"
                     VerticalScrollBarVisibility="Auto"
                     FontSize="18"
                     FontFamily="Segoe UI">
            <RichTextBox.Resources>
                <Style TargetType="{x:Type Paragraph}">
                    <Setter Property="Margin" Value="0"/>
                </Style>
            </RichTextBox.Resources>
        </RichTextBox>

        <!-- Top Right Controls -->
        <StackPanel Orientation="Horizontal" 
                    HorizontalAlignment="Right" 
                    VerticalAlignment="Top" 
                    Margin="0,10,10,0">
            


            <!-- Font Button -->
            <TextBlock x:Name="FontBtn"
                       Text="Aa" 
                       Style="{StaticResource TinyControlStyle}"
                       MouseLeftButtonDown="FontBtn_Click"
                       ToolTip="Change Font"
                       Margin="0,0,16,0"/>

            <!-- Font Size Button -->
            <TextBlock x:Name="FontSizeBtn"
                       Text="18"
                       Style="{StaticResource TinyControlStyle}"
                       MouseLeftButtonDown="FontSizeBtn_Click"
                       ToolTip="Change Size"
                       Margin="0,0,16,0"/>

            <!-- Bold Button -->
            <TextBlock x:Name="BoldBtn"
                       Text="B"
                       FontWeight="Bold"
                       Style="{StaticResource TinyControlStyle}"
                       MouseLeftButtonDown="BoldBtn_Click"
                       ToolTip="Toggle Bold"
                       Margin="0,0,16,0"/>

            <!-- Italic Button -->
            <TextBlock x:Name="ItalicBtn"
                       Text="I"
                       FontStyle="Italic"
                       Style="{StaticResource TinyControlStyle}"
                       MouseLeftButtonDown="ItalicBtn_Click"
                       ToolTip="Toggle Italic"
                       Margin="0,0,16,0"/>



            <!-- Timer -->
            <Grid Margin="8,0,0,0">
                <TextBlock x:Name="TimerDisplay"
                           Text="00:00"
                           Style="{StaticResource TinyControlStyle}"
                           MouseLeftButtonDown="Timer_Click"
                           PreviewMouseRightButtonUp="Timer_RightClick"/>
                
                <TextBox x:Name="TimerEdit"
                         Visibility="Collapsed"
                         FontSize="14"
                         Width="40"
                         BorderThickness="0"
                         Padding="0"
                         VerticalAlignment="Center"
                         KeyDown="TimerEdit_KeyDown"
                         LostFocus="TimerEdit_LostFocus"/>
            </Grid>

            <!-- Window Controls -->
            <StackPanel Orientation="Horizontal" Margin="16,0,0,0">
                <TextBlock Text="_" 
                           Style="{StaticResource TinyControlStyle}"
                           MouseLeftButtonDown="MinBtn_Click"
                           ToolTip="Minimize" Margin="0,0,8,0"/>
                <TextBlock Text="[ ]" 
                           Style="{StaticResource TinyControlStyle}"
                           MouseLeftButtonDown="MaxBtn_Click"
                           ToolTip="Maximize/Restore" Margin="0,0,8,0"/>
                <TextBlock Text="X" 
                           Style="{StaticResource TinyControlStyle}"
                           MouseLeftButtonDown="CloseBtn_Click"
                           ToolTip="Close" Margin="0,0,0,0"/>
            </StackPanel>

        </StackPanel>

        <!-- Unsaved Changes Overlay -->
        <Grid x:Name="UnsavedOverlay" Visibility="Collapsed" Background="#CCFFFFFF">
            <Border Background="White" BorderBrush="#DDDDDD" BorderThickness="1" 
                    HorizontalAlignment="Center" VerticalAlignment="Center" 
                    Padding="30" CornerRadius="4">
                <StackPanel>
                    <TextBlock Text="Save changes before exiting?" 
                               FontSize="16" Margin="0,0,0,20" 
                               HorizontalAlignment="Center"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <Button Content="Save" Click="OverlaySave_Click" Margin="0,0,10,0" Padding="10,5"/>
                        <Button Content="Don't Save" Click="OverlayDontSave_Click" Margin="0,0,10,0" Padding="10,5"/>
                        <Button Content="Cancel" Click="OverlayCancel_Click" Padding="10,5"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>
